# RAG QA System - åç«¯æ¶æ„è¯¦è§£ (æ–°æ‰‹å‹å¥½ç‰ˆ)

**ç‰ˆæœ¬**: v1.0.0  
**æ›´æ–°æ—¥æœŸ**: 2026-01-09  
**æŠ€æœ¯æ ˆ**: Spring Boot 3.2 + PostgreSQL + pgvector  
**ä»£ç æ³¨é‡Š**: âœ… å·²æ·»åŠ è¯¦ç»†çš„æ–°æ‰‹å‹å¥½æ³¨é‡Š

---

## ğŸ“ é¡¹ç›®ç»“æ„ (å·²æ·»åŠ è¯¦ç»†æ³¨é‡Š)

```
demo1/src/main/java/com/hiyuan/demo1/
â”œâ”€â”€ Demo1Application.java          # ğŸš€ ä¸»å¯åŠ¨ç±» (âœ… å·²æ³¨é‡Š)
â”œâ”€â”€ config/                        # âš™ï¸ é…ç½®ç±»
â”‚   â”œâ”€â”€ AsyncConfig.java           #   å¼‚æ­¥å¤„ç†é…ç½® (âœ… å·²æ³¨é‡Š)
â”‚   â””â”€â”€ CorsConfig.java            #   è·¨åŸŸé…ç½® (âœ… å·²æ³¨é‡Š)
â”œâ”€â”€ controller/                    # ğŸŒ æ§åˆ¶å™¨å±‚ (æ¥æ”¶HTTPè¯·æ±‚)
â”‚   â””â”€â”€ SystemController.java     #   ç³»ç»ŸçŠ¶æ€æ¥å£ (âœ… å·²æ³¨é‡Š)
â”œâ”€â”€ dto/                          # ğŸ“¦ æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ response/                 #   å“åº”DTO
â”‚       â””â”€â”€ ApiResponse.java      #   ç»Ÿä¸€å“åº”æ ¼å¼ (å¾…æ³¨é‡Š)
â”œâ”€â”€ entity/                       # ğŸ—ƒï¸ å®ä½“ç±» (æ•°æ®åº“è¡¨æ˜ å°„)
â”‚   â”œâ”€â”€ BaseEntity.java           #   åŸºç¡€å®ä½“ç±» (âœ… å·²æ³¨é‡Š)
â”‚   â”œâ”€â”€ User.java                 #   ç”¨æˆ·å®ä½“ (âœ… å·²æ³¨é‡Š)
â”‚   â”œâ”€â”€ Document.java             #   æ–‡æ¡£å®ä½“ (âœ… å·²æ³¨é‡Š)
â”‚   â”œâ”€â”€ DocumentChunk.java        #   æ–‡æ¡£åˆ†å—å®ä½“ (å¾…æ³¨é‡Š)
â”‚   â”œâ”€â”€ VectorRecord.java         #   å‘é‡è®°å½•å®ä½“ (å¾…æ³¨é‡Š)
â”‚   â”œâ”€â”€ QaHistory.java            #   é—®ç­”å†å²å®ä½“ (å¾…æ³¨é‡Š)
â”‚   â””â”€â”€ Citation.java             #   å¼•ç”¨å®ä½“ (å¾…æ³¨é‡Š)
â”œâ”€â”€ enums/                        # ğŸ“‹ æšä¸¾ç±»
â”‚   â”œâ”€â”€ DocumentStatus.java       #   æ–‡æ¡£çŠ¶æ€æšä¸¾ (âœ… å·²æ³¨é‡Š)
â”‚   â””â”€â”€ FileType.java             #   æ–‡ä»¶ç±»å‹æšä¸¾ (âœ… å·²æ³¨é‡Š)
â”œâ”€â”€ exception/                    # âŒ å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ BusinessException.java    #   ä¸šåŠ¡å¼‚å¸¸ (å¾…æ³¨é‡Š)
â”‚   â””â”€â”€ GlobalExceptionHandler.java #  å…¨å±€å¼‚å¸¸å¤„ç†å™¨ (å¾…æ³¨é‡Š)
â””â”€â”€ repository/                   # ğŸ—„ï¸ æ•°æ®è®¿é—®å±‚
    â”œâ”€â”€ UserRepository.java       #   ç”¨æˆ·æ•°æ®è®¿é—® (å¾…æ³¨é‡Š)
    â”œâ”€â”€ DocumentRepository.java   #   æ–‡æ¡£æ•°æ®è®¿é—® (å¾…æ³¨é‡Š)
    â”œâ”€â”€ DocumentChunkRepository.java # æ–‡æ¡£åˆ†å—æ•°æ®è®¿é—® (å¾…æ³¨é‡Š)
    â”œâ”€â”€ VectorRecordRepository.java  # å‘é‡è®°å½•æ•°æ®è®¿é—® (å¾…æ³¨é‡Š)
    â”œâ”€â”€ QaHistoryRepository.java  #   é—®ç­”å†å²æ•°æ®è®¿é—® (å¾…æ³¨é‡Š)
    â””â”€â”€ CitationRepository.java   #   å¼•ç”¨æ•°æ®è®¿é—® (å¾…æ³¨é‡Š)
```

---

## ğŸ“ æ–°æ‰‹å­¦ä¹ æŒ‡å—

### ä»å“ªé‡Œå¼€å§‹çœ‹ä»£ç ï¼Ÿ

**æ¨èå­¦ä¹ é¡ºåºï¼š**

1. **Demo1Application.java** - åº”ç”¨å…¥å£ï¼Œäº†è§£æ•´ä½“å¯åŠ¨æµç¨‹
2. **BaseEntity.java** - åŸºç¡€å®ä½“ï¼Œç†è§£æ•°æ®åº“æ˜ å°„åŸºç¡€
3. **User.java** - ç”¨æˆ·å®ä½“ï¼Œå­¦ä¹ JPAå…³è”å…³ç³»
4. **Document.java** - æ–‡æ¡£å®ä½“ï¼Œç†è§£ä¸šåŠ¡æ ¸å¿ƒæ¦‚å¿µ
5. **DocumentStatus.java** - çŠ¶æ€æšä¸¾ï¼Œäº†è§£ä¸šåŠ¡æµç¨‹
6. **FileType.java** - æ–‡ä»¶ç±»å‹ï¼Œäº†è§£æ”¯æŒçš„æ ¼å¼
7. **SystemController.java** - æ§åˆ¶å™¨ï¼Œå­¦ä¹ REST APIè®¾è®¡
8. **AsyncConfig.java** - å¼‚æ­¥é…ç½®ï¼Œç†è§£æ€§èƒ½ä¼˜åŒ–
9. **CorsConfig.java** - è·¨åŸŸé…ç½®ï¼Œè§£å†³å‰åç«¯é€šä¿¡é—®é¢˜

### æ¯ä¸ªæ–‡ä»¶çš„å­¦ä¹ é‡ç‚¹

#### 1. Demo1Application.java ğŸš€
**å­¦ä¹ é‡ç‚¹ï¼š**
- Spring Bootåº”ç”¨å¯åŠ¨åŸç†
- @SpringBootApplicationæ³¨è§£çš„ä½œç”¨
- @EnableAsyncå¼‚æ­¥å¤„ç†çš„æ„ä¹‰

**å…³é”®ä»£ç ï¼š**
```java
@SpringBootApplication  // è¿™ä¸€ä¸ªæ³¨è§£åŒ…å«äº†å¾ˆå¤šåŠŸèƒ½
@EnableAsync           // å¯ç”¨å¼‚æ­¥å¤„ç†
public class Demo1Application {
    public static void main(String[] args) {
        SpringApplication.run(Demo1Application.class, args);
    }
}
```

#### 2. BaseEntity.java ğŸ—ƒï¸
**å­¦ä¹ é‡ç‚¹ï¼š**
- JPAå®ä½“æ˜ å°„åŸºç¡€
- UUIDä¸»é”®çš„ä¼˜åŠ¿
- è‡ªåŠ¨æ—¶é—´æˆ³çš„å®ç°
- @MappedSuperclassçš„ä½œç”¨

**å…³é”®æ¦‚å¿µï¼š**
- ä¸ºä»€ä¹ˆä½¿ç”¨UUIDè€Œä¸æ˜¯è‡ªå¢IDï¼Ÿ
- @CreationTimestampå’Œ@UpdateTimestampçš„åŒºåˆ«
- ç»§æ‰¿åœ¨JPAä¸­çš„åº”ç”¨

#### 3. User.java ğŸ‘¤
**å­¦ä¹ é‡ç‚¹ï¼š**
- JPAå…³è”å…³ç³»ï¼ˆ@OneToManyï¼‰
- çº§è”æ“ä½œï¼ˆcascadeï¼‰
- æ‡’åŠ è½½ï¼ˆLAZYï¼‰vs ç«‹å³åŠ è½½ï¼ˆEAGERï¼‰
- æ•°æ®åº“çº¦æŸï¼ˆunique, nullableï¼‰

**å…³é”®ä»£ç ï¼š**
```java
@OneToMany(mappedBy = "user", cascade = CascadeType.ALL, orphanRemoval = true)
private List<Document> documents = new ArrayList<>();
```

#### 4. Document.java ğŸ“„
**å­¦ä¹ é‡ç‚¹ï¼š**
- å¤æ‚ä¸šåŠ¡å®ä½“çš„è®¾è®¡
- æšä¸¾ç±»å‹åœ¨JPAä¸­çš„ä½¿ç”¨
- æ–‡æ¡£å¤„ç†çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- å¤šå¯¹ä¸€å…³ç³»ï¼ˆ@ManyToOneï¼‰

**ä¸šåŠ¡ç†è§£ï¼š**
- æ–‡æ¡£ä»ä¸Šä¼ åˆ°å¯ç”¨çš„å®Œæ•´æµç¨‹
- çŠ¶æ€æœºçš„æ¦‚å¿µå’Œåº”ç”¨
- å¼‚æ­¥å¤„ç†çš„å¿…è¦æ€§

#### 5. SystemController.java ğŸŒ
**å­¦ä¹ é‡ç‚¹ï¼š**
- REST APIçš„è®¾è®¡åŸåˆ™
- @RestController vs @Controller
- ç»Ÿä¸€å“åº”æ ¼å¼çš„é‡è¦æ€§
- å¥åº·æ£€æŸ¥çš„å®ç°

**APIè®¾è®¡ï¼š**
```java
@GetMapping("/health")  // ç®€å•å¥åº·æ£€æŸ¥
@GetMapping("/status")  // è¯¦ç»†çŠ¶æ€ä¿¡æ¯
```

#### 6. AsyncConfig.java âš¡
**å­¦ä¹ é‡ç‚¹ï¼š**
- çº¿ç¨‹æ± çš„é…ç½®å’Œä¼˜åŒ–
- å¼‚æ­¥å¤„ç†çš„åº”ç”¨åœºæ™¯
- @Beanæ³¨è§£çš„ä½œç”¨
- é…ç½®ç±»çš„è®¾è®¡æ¨¡å¼

**æ€§èƒ½ä¼˜åŒ–ï¼š**
- ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥å¤„ç†ï¼Ÿ
- çº¿ç¨‹æ± å‚æ•°å¦‚ä½•è°ƒä¼˜ï¼Ÿ
- å¦‚ä½•é¿å…çº¿ç¨‹æ³„æ¼ï¼Ÿ

#### 7. CorsConfig.java ğŸŒ
**å­¦ä¹ é‡ç‚¹ï¼š**
- è·¨åŸŸé—®é¢˜çš„äº§ç”ŸåŸå› 
- CORSçš„å·¥ä½œåŸç†
- å®‰å…¨æ€§è€ƒè™‘
- å¼€å‘ç¯å¢ƒvsç”Ÿäº§ç¯å¢ƒçš„é…ç½®å·®å¼‚

**å®é™…é—®é¢˜ï¼š**
- å‰ç«¯ä¸ºä»€ä¹ˆæ— æ³•è®¿é—®åç«¯ï¼Ÿ
- é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ
- å¦‚ä½•é…ç½®ç”Ÿäº§ç¯å¢ƒçš„CORSï¼Ÿ

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ¦‚å¿µè§£é‡Š

### 1. Spring Boot è‡ªåŠ¨é…ç½®

**ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®ï¼Ÿ**
```java
@SpringBootApplication
// è¿™ä¸ªæ³¨è§£å®é™…ä¸ŠåŒ…å«äº†ï¼š
// @Configuration - é…ç½®ç±»
// @EnableAutoConfiguration - è‡ªåŠ¨é…ç½®
// @ComponentScan - ç»„ä»¶æ‰«æ
```

**è‡ªåŠ¨é…ç½®åšäº†ä»€ä¹ˆï¼Ÿ**
- è‡ªåŠ¨é…ç½®æ•°æ®æºï¼ˆDataSourceï¼‰
- è‡ªåŠ¨é…ç½®JPAï¼ˆEntityManagerFactoryï¼‰
- è‡ªåŠ¨é…ç½®WebæœåŠ¡å™¨ï¼ˆTomcatï¼‰
- è‡ªåŠ¨é…ç½®JSONåºåˆ—åŒ–ï¼ˆJacksonï¼‰

### 2. JPA å®ä½“æ˜ å°„

**åŸºç¡€æ¦‚å¿µï¼š**
```java
@Entity  // æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªæ•°æ®åº“å®ä½“
@Table(name = "t_user")  // æŒ‡å®šè¡¨å
public class User extends BaseEntity {
    @Column(name = "username", nullable = false, unique = true)
    private String username;  // æ˜ å°„åˆ°æ•°æ®åº“åˆ—
}
```

**å…³è”å…³ç³»ï¼š**
- @OneToMany - ä¸€å¯¹å¤šï¼ˆä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªæ–‡æ¡£ï¼‰
- @ManyToOne - å¤šå¯¹ä¸€ï¼ˆå¤šä¸ªæ–‡æ¡£å±äºä¸€ä¸ªç”¨æˆ·ï¼‰
- @OneToOne - ä¸€å¯¹ä¸€ï¼ˆä¸€ä¸ªåˆ†å—å¯¹åº”ä¸€ä¸ªå‘é‡ï¼‰

### 3. å¼‚æ­¥å¤„ç†åŸç†

**ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ**
```java
// åŒæ­¥å¤„ç†ï¼ˆä¸å¥½ï¼‰
public String uploadDocument(MultipartFile file) {
    saveFile(file);           // 1ç§’
    parseDocument(file);      // 10ç§’
    chunkDocument(file);      // 5ç§’
    vectorizeDocument(file);  // 30ç§’
    return "å¤„ç†å®Œæˆ";         // ç”¨æˆ·ç­‰å¾…46ç§’ï¼
}

// å¼‚æ­¥å¤„ç†ï¼ˆå¥½ï¼‰
public String uploadDocument(MultipartFile file) {
    saveFile(file);                    // 1ç§’
    processDocumentAsync(file);        // ç«‹å³è¿”å›ï¼Œåå°å¤„ç†
    return "ä¸Šä¼ æˆåŠŸï¼Œæ­£åœ¨åå°å¤„ç†";     // ç”¨æˆ·åªç­‰1ç§’
}
```

### 4. REST API è®¾è®¡åŸåˆ™

**RESTfulè®¾è®¡ï¼š**
```java
GET    /api/documents      // è·å–æ–‡æ¡£åˆ—è¡¨
POST   /api/documents      // åˆ›å»ºæ–°æ–‡æ¡£
GET    /api/documents/{id} // è·å–ç‰¹å®šæ–‡æ¡£
PUT    /api/documents/{id} // æ›´æ–°æ–‡æ¡£
DELETE /api/documents/{id} // åˆ é™¤æ–‡æ¡£
```

**ç»Ÿä¸€å“åº”æ ¼å¼ï¼š**
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {...},
  "timestamp": "2026-01-09T12:00:00Z"
}
```

---

## ğŸš€ å¼€å‘ç¯å¢ƒæ­å»º

### 1. å¿…éœ€è½¯ä»¶
- **Java 17+**: Spring Boot 3.xè¦æ±‚
- **Maven 3.6+**: é¡¹ç›®æ„å»ºå·¥å…·
- **PostgreSQL 15+**: æ•°æ®åº“
- **IDE**: IntelliJ IDEAæˆ–Eclipse

### 2. å¯åŠ¨æ­¥éª¤
```bash
# 1. å¯åŠ¨PostgreSQL
brew services start postgresql@15

# 2. åˆ›å»ºæ•°æ®åº“
psql postgres -c "CREATE DATABASE rag_qa_system;"
psql rag_qa_system -c "CREATE EXTENSION vector;"

# 3. å¯åŠ¨åº”ç”¨
cd demo1
mvn spring-boot:run

# 4. éªŒè¯
curl http://localhost:8080/api/system/health
```

### 3. å¼€å‘å·¥å…·é…ç½®

**IntelliJ IDEAæ’ä»¶ï¼š**
- Lombok Plugin - æ”¯æŒ@Getter/@Setterç­‰æ³¨è§£
- JPA Buddy - JPAå®ä½“è®¾è®¡åŠ©æ‰‹
- Database Navigator - æ•°æ®åº“ç®¡ç†

**VS Codeæ’ä»¶ï¼š**
- Extension Pack for Java
- Spring Boot Extension Pack
- PostgreSQL Extension

---

## ğŸ› å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 1. ç¼–è¯‘é—®é¢˜

**é—®é¢˜ï¼š** Lombokæ³¨è§£ä¸ç”Ÿæ•ˆ
```bash
# è§£å†³æ–¹æ¡ˆ
mvn clean compile
# ç¡®ä¿IDEå®‰è£…äº†Lombokæ’ä»¶
```

**é—®é¢˜ï¼š** æ‰¾ä¸åˆ°ä¸»ç±»
```bash
# è§£å†³æ–¹æ¡ˆ
mvn clean package
java -jar target/rag-qa-system-1.0.0-SNAPSHOT.jar
```

### 2. æ•°æ®åº“é—®é¢˜

**é—®é¢˜ï¼š** è¿æ¥è¢«æ‹’ç»
```yaml
# æ£€æŸ¥application.ymlé…ç½®
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/rag_qa_system
    username: postgres
    password: your_password
```

**é—®é¢˜ï¼š** è¡¨ä¸å­˜åœ¨
```yaml
# å¯ç”¨è‡ªåŠ¨å»ºè¡¨
spring:
  jpa:
    hibernate:
      ddl-auto: update
```

### 3. è·¨åŸŸé—®é¢˜

**é—®é¢˜ï¼š** å‰ç«¯æ— æ³•è®¿é—®åç«¯
- æ£€æŸ¥CorsConfig.javaé…ç½®
- ç¡®è®¤å‰ç«¯åœ°å€åœ¨allowedOriginsä¸­
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„CORSé”™è¯¯

### 4. å¼‚æ­¥é—®é¢˜

**é—®é¢˜ï¼š** @Asyncä¸ç”Ÿæ•ˆ
- ç¡®ä¿å¯åŠ¨ç±»æœ‰@EnableAsyncæ³¨è§£
- ç¡®ä¿æ–¹æ³•æ˜¯publicçš„
- ç¡®ä¿ä¸æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­è°ƒç”¨

---

## ğŸ“š å­¦ä¹ èµ„æºæ¨è

### å®˜æ–¹æ–‡æ¡£
- [Spring Bootå®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [Spring Data JPAæ–‡æ¡£](https://spring.io/projects/spring-data-jpa)
- [PostgreSQLæ–‡æ¡£](https://www.postgresql.org/docs/)

### åœ¨çº¿æ•™ç¨‹
- Spring Bootå…¥é—¨æ•™ç¨‹
- JPA/Hibernateæ•™ç¨‹
- RESTful APIè®¾è®¡æŒ‡å—

### æ¨èä¹¦ç±
- ã€ŠSpring Bootå®æˆ˜ã€‹
- ã€ŠJavaæŒä¹…åŒ–ä¸Hibernateã€‹
- ã€ŠRESTful Web Servicesã€‹

---

## ğŸ¯ ä¸‹ä¸€æ­¥å­¦ä¹ è®¡åˆ’

### åˆçº§é˜¶æ®µ (1-2å‘¨)
1. ç†è§£Spring BootåŸºç¡€æ¦‚å¿µ
2. æŒæ¡JPAå®ä½“æ˜ å°„
3. å­¦ä¼šç¼–å†™ç®€å•çš„REST API
4. äº†è§£æ•°æ®åº“æ“ä½œ

### ä¸­çº§é˜¶æ®µ (2-4å‘¨)
1. æ·±å…¥ç†è§£å¼‚æ­¥å¤„ç†
2. æŒæ¡å¤æ‚çš„JPAæŸ¥è¯¢
3. å­¦ä¹ å¼‚å¸¸å¤„ç†æœºåˆ¶
4. ç†è§£äº‹åŠ¡ç®¡ç†

### é«˜çº§é˜¶æ®µ (1-2ä¸ªæœˆ)
1. æ€§èƒ½ä¼˜åŒ–æŠ€å·§
2. å®‰å…¨æ€§é…ç½®
3. ç›‘æ§å’Œæ—¥å¿—
4. å¾®æœåŠ¡æ¶æ„

---

**æ–‡æ¡£ç»´æŠ¤**: éšç€ä»£ç æ›´æ–°åŠæ—¶æ›´æ–°æ­¤æ–‡æ¡£  
**å­¦ä¹ äº¤æµ**: å¦‚æœ‰é—®é¢˜è¯·æŸ¥çœ‹æ³¨é‡Šæˆ–è”ç³»å¼€å‘å›¢é˜Ÿ  
**ä»£ç è´¨é‡**: æ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶å·²æ·»åŠ è¯¦ç»†çš„æ–°æ‰‹å‹å¥½æ³¨é‡Š

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„ (4å±‚)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (React/Vue)                      â”‚
â”‚                 http://localhost:3000                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/REST API
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Controller å±‚ (æ§åˆ¶å™¨)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚SystemCtrl   â”‚ â”‚DocumentCtrl â”‚ â”‚QaController â”‚       â”‚
â”‚  â”‚ç³»ç»ŸçŠ¶æ€     â”‚ â”‚æ–‡æ¡£ç®¡ç†     â”‚ â”‚æ™ºèƒ½é—®ç­”     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â€¢ æ¥æ”¶HTTPè¯·æ±‚  â€¢ å‚æ•°éªŒè¯      â€¢ è°ƒç”¨Service        â”‚
â”‚  â€¢ è¿”å›JSONå“åº”  â€¢ å¼‚å¸¸å¤„ç†      â€¢ ç»Ÿä¸€å“åº”æ ¼å¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ æ–¹æ³•è°ƒç”¨
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Service å±‚ (ä¸šåŠ¡é€»è¾‘)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚DocumentSvc  â”‚ â”‚VectorSvc    â”‚ â”‚RagService   â”‚       â”‚
â”‚  â”‚æ–‡æ¡£å¤„ç†     â”‚ â”‚å‘é‡åŒ–       â”‚ â”‚é—®ç­”å¼•æ“     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â€¢ ä¸šåŠ¡é€»è¾‘å¤„ç†  â€¢ å¼‚æ­¥ä»»åŠ¡      â€¢ äº‹åŠ¡ç®¡ç†            â”‚
â”‚  â€¢ æ•°æ®è½¬æ¢      â€¢ å¤–éƒ¨APIè°ƒç”¨   â€¢ å¤æ‚æŸ¥è¯¢            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ JPAæ–¹æ³•è°ƒç”¨
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Repository å±‚ (æ•°æ®è®¿é—®)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚DocumentRepo â”‚ â”‚VectorRepo   â”‚ â”‚QaHistoryRepoâ”‚       â”‚
â”‚  â”‚æ–‡æ¡£CRUD     â”‚ â”‚å‘é‡æŸ¥è¯¢     â”‚ â”‚å†å²è®°å½•     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â€¢ æ•°æ®åº“æ“ä½œ    â€¢ è‡ªå®šä¹‰æŸ¥è¯¢    â€¢ åˆ†é¡µæŸ¥è¯¢            â”‚
â”‚  â€¢ å…³è”æŸ¥è¯¢      â€¢ åŸç”ŸSQL      â€¢ æ‰¹é‡æ“ä½œ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ JDBC/SQL
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PostgreSQL + pgvector                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚t_document   â”‚ â”‚t_vector_rec â”‚ â”‚t_qa_history â”‚       â”‚
â”‚  â”‚æ–‡æ¡£è¡¨       â”‚ â”‚å‘é‡è¡¨       â”‚ â”‚é—®ç­”å†å²è¡¨   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â€¢ å…³ç³»å‹æ•°æ®    â€¢ å‘é‡å­˜å‚¨      â€¢ äº‹åŠ¡æ”¯æŒ            â”‚
â”‚  â€¢ ACIDç‰¹æ€§      â€¢ ç›¸ä¼¼åº¦æŸ¥è¯¢    â€¢ ç´¢å¼•ä¼˜åŒ–            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 1. ä¸»å¯åŠ¨ç±» (Demo1Application.java)

```java
@SpringBootApplication  // Spring Bootæ ¸å¿ƒæ³¨è§£
@EnableAsync           // å¯ç”¨å¼‚æ­¥å¤„ç†
public class Demo1Application {
    public static void main(String[] args) {
        SpringApplication.run(Demo1Application.class, args);
    }
}
```

**ä½œç”¨**:
- ğŸš€ åº”ç”¨ç¨‹åºå…¥å£ç‚¹
- ğŸ” è‡ªåŠ¨æ‰«æå’Œé…ç½®æ‰€æœ‰ç»„ä»¶
- ğŸŒ å¯åŠ¨å†…åµŒTomcatæœåŠ¡å™¨
- âš¡ å¯ç”¨å¼‚æ­¥å¤„ç†åŠŸèƒ½

### 2. é…ç½®å±‚ (config/)

#### AsyncConfig.java - å¼‚æ­¥å¤„ç†é…ç½®
```java
@Configuration
@EnableAsync
public class AsyncConfig {
    @Bean(name = "documentProcessorExecutor")
    public Executor documentProcessorExecutor() {
        // æ–‡æ¡£å¤„ç†ä¸“ç”¨çº¿ç¨‹æ± 
        // æ ¸å¿ƒçº¿ç¨‹æ•°: 2, æœ€å¤§çº¿ç¨‹æ•°: 5
        // ç”¨äºæ–‡æ¡£è§£æã€åˆ†å—ã€å‘é‡åŒ–ç­‰è€—æ—¶æ“ä½œ
    }
}
```

**ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥å¤„ç†ï¼Ÿ**
- ğŸ“„ æ–‡æ¡£å¤„ç†å¾ˆè€—æ—¶ (30-50ç§’)
- ğŸ‘¤ ç”¨æˆ·ä¸æƒ³ç­‰å¾…ï¼Œå¸Œæœ›ç«‹å³å¾—åˆ°å“åº”
- ğŸ”„ åå°æ…¢æ…¢å¤„ç†ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­å…¶ä»–æ“ä½œ

#### CorsConfig.java - è·¨åŸŸé…ç½®
```java
@Configuration
public class CorsConfig {
    @Bean
    public CorsFilter corsFilter() {
        // å…è®¸å‰ç«¯ (localhost:3000) è®¿é—®åç«¯ (localhost:8080)
        // é…ç½®å…è®¸çš„åŸŸåã€æ–¹æ³•ã€è¯·æ±‚å¤´
    }
}
```

**ä¸ºä»€ä¹ˆéœ€è¦CORSé…ç½®ï¼Ÿ**
- ğŸŒ å‰ç«¯å’Œåç«¯è¿è¡Œåœ¨ä¸åŒç«¯å£
- ğŸ›¡ï¸ æµè§ˆå™¨åŒæºç­–ç•¥ä¼šé˜»æ­¢è·¨åŸŸè¯·æ±‚
- âœ… CORSé…ç½®å‘Šè¯‰æµè§ˆå™¨"å…è®¸è¿™ä¸ªè·¨åŸŸè¯·æ±‚"

### 3. å®ä½“å±‚ (entity/)

#### å®ä½“å…³ç³»å›¾
```
User (ç”¨æˆ·)
  â†“ 1:N
Document (æ–‡æ¡£)
  â†“ 1:N
DocumentChunk (æ–‡æ¡£åˆ†å—)
  â†“ 1:1
VectorRecord (å‘é‡è®°å½•)

User (ç”¨æˆ·)
  â†“ 1:N
QaHistory (é—®ç­”å†å²)
  â†“ 1:N
Citation (å¼•ç”¨)
  â†“ N:1
DocumentChunk (æ–‡æ¡£åˆ†å—)
```

#### æ ¸å¿ƒå®ä½“è¯´æ˜

**BaseEntity** - åŸºç¡€å®ä½“ç±»
```java
@MappedSuperclass
public abstract class BaseEntity {
    private UUID id;           // ä¸»é”®ï¼Œå…¨å±€å”¯ä¸€
    private LocalDateTime createdAt;  // åˆ›å»ºæ—¶é—´ï¼Œè‡ªåŠ¨è®¾ç½®
    private LocalDateTime updatedAt;  // æ›´æ–°æ—¶é—´ï¼Œè‡ªåŠ¨æ›´æ–°
}
```

**Document** - æ–‡æ¡£å®ä½“
```java
@Entity
@Table(name = "t_document")
public class Document extends BaseEntity {
    private UUID userId;       // æ‰€å±ç”¨æˆ·
    private String filename;   // æ–‡ä»¶å
    private String filePath;   // å­˜å‚¨è·¯å¾„
    private Long fileSize;     // æ–‡ä»¶å¤§å°
    private FileType fileType; // æ–‡ä»¶ç±»å‹ (PDF/DOCX/PPTX)
    private DocumentStatus status; // å¤„ç†çŠ¶æ€
    private Integer chunkCount; // åˆ†å—æ•°é‡
}
```

**VectorRecord** - å‘é‡è®°å½• (æ ¸å¿ƒ!)
```java
@Entity
@Table(name = "t_vector_record")
public class VectorRecord extends BaseEntity {
    private UUID chunkId;      // å…³è”çš„æ–‡æ¡£åˆ†å—
    private UUID documentId;   // å…³è”çš„æ–‡æ¡£
    private PGvector embedding; // 768ç»´å‘é‡ (pgvectorç±»å‹)
    private String embeddingModel; // å‘é‡åŒ–æ¨¡å‹åç§°
}
```

### 4. æ•°æ®è®¿é—®å±‚ (repository/)

#### Spring Data JPA çš„ä¼˜åŠ¿
- ğŸ”„ è‡ªåŠ¨ç”ŸæˆåŸºç¡€CRUDæ–¹æ³•
- ğŸ“ æ”¯æŒæ–¹æ³•åæŸ¥è¯¢ (findByUserId)
- ğŸ” æ”¯æŒè‡ªå®šä¹‰æŸ¥è¯¢ (@Query)
- ğŸ“„ æ”¯æŒåˆ†é¡µå’Œæ’åº

#### å‘é‡æŸ¥è¯¢ç¤ºä¾‹ (VectorRecordRepository)
```java
@Repository
public interface VectorRecordRepository extends JpaRepository<VectorRecord, UUID> {
    
    // æ ¸å¿ƒæŸ¥è¯¢ï¼šå‘é‡ç›¸ä¼¼åº¦æœç´¢
    @Query(value = 
        "SELECT vr.* FROM t_vector_record vr " +
        "JOIN t_document d ON vr.document_id = d.id " +
        "WHERE d.user_id = :userId AND d.status = 'SUCCESS' " +
        "ORDER BY vr.embedding <-> :queryVector " +  // pgvectorç›¸ä¼¼åº¦æ“ä½œç¬¦
        "LIMIT :topK",
        nativeQuery = true)
    List<VectorRecord> findNearestVectors(
        @Param("queryVector") PGvector queryVector,
        @Param("userId") UUID userId,
        @Param("topK") int topK
    );
}
```

### 5. æ§åˆ¶å™¨å±‚ (controller/)

#### RESTful API è®¾è®¡åŸåˆ™
- ğŸŒ ä½¿ç”¨HTTPæ–¹æ³•è¡¨ç¤ºæ“ä½œ (GET/POST/PUT/DELETE)
- ğŸ“ ä½¿ç”¨URLè·¯å¾„è¡¨ç¤ºèµ„æº (/api/documents)
- ğŸ“¦ ç»Ÿä¸€å“åº”æ ¼å¼ (ApiResponse)
- âŒ ç»Ÿä¸€å¼‚å¸¸å¤„ç† (GlobalExceptionHandler)

#### ç¤ºä¾‹æ§åˆ¶å™¨
```java
@RestController
@RequestMapping("/api/system")
public class SystemController {
    
    @GetMapping("/health")
    public ApiResponse<String> healthCheck() {
        return ApiResponse.success("healthy");
    }
    
    @GetMapping("/status")
    public ApiResponse<Map<String, Object>> getSystemStatus() {
        // æ£€æŸ¥æ•°æ®åº“è¿æ¥ã€ç³»ç»Ÿä¿¡æ¯ç­‰
        return ApiResponse.success("ç³»ç»Ÿè¿è¡Œæ­£å¸¸", statusData);
    }
}
```

---

## ğŸ”„ æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 1. æ–‡æ¡£å¤„ç†æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
    â†“
Controlleræ¥æ”¶è¯·æ±‚
    â†“
ä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ° + åˆ›å»ºDocumentè®°å½•
    â†“
ç«‹å³è¿”å›"ä¸Šä¼ æˆåŠŸ" (ç”¨æˆ·çœ‹åˆ°å“åº”)
    â†“
@Asyncå¼‚æ­¥å¤„ç†:
    â”œâ”€ è§£ææ–‡ä»¶ (PDFBox/POI)
    â”œâ”€ æ¸…æ´—æ–‡æœ¬
    â”œâ”€ åˆ†å—å¤„ç† (1000å­—/å—)
    â”œâ”€ è°ƒç”¨HuggingFaceå‘é‡åŒ–
    â”œâ”€ å­˜å‚¨å‘é‡åˆ°PostgreSQL
    â””â”€ æ›´æ–°DocumentçŠ¶æ€ä¸ºSUCCESS
```

### 2. RAGé—®ç­”æµç¨‹

```
ç”¨æˆ·æé—®
    â†“
Controlleræ¥æ”¶é—®é¢˜
    â†“
Serviceå¤„ç†:
    â”œâ”€ å‘é‡åŒ–é—®é¢˜ (HuggingFace)
    â”œâ”€ å‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢ (pgvector)
    â”œâ”€ è·å–Top-5ç›¸å…³åˆ†å—
    â”œâ”€ æ‹¼è£…Prompt
    â”œâ”€ è°ƒç”¨LLMç”Ÿæˆç­”æ¡ˆ (Ollama)
    â”œâ”€ ä¿å­˜é—®ç­”å†å²
    â””â”€ æå–å¼•ç”¨ä¿¡æ¯
    â†“
è¿”å›ç­”æ¡ˆ + å¼•ç”¨ç»™å‰ç«¯
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### t_document (æ–‡æ¡£è¡¨)
```sql
CREATE TABLE t_document (
    id UUID PRIMARY KEY,
    user_id UUID NOT NULL,
    filename VARCHAR(255) NOT NULL,
    file_path VARCHAR(500),
    file_size BIGINT,
    file_type VARCHAR(50),
    status VARCHAR(50) DEFAULT 'UPLOADING',
    chunk_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### t_vector_record (å‘é‡è¡¨) - æ ¸å¿ƒ!
```sql
CREATE TABLE t_vector_record (
    id UUID PRIMARY KEY,
    chunk_id UUID NOT NULL UNIQUE,
    document_id UUID NOT NULL,
    embedding vector(768),  -- pgvectorç±»å‹ï¼Œ768ç»´å‘é‡
    embedding_model VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### å‘é‡æŸ¥è¯¢ (æœ€é‡è¦çš„SQL)
```sql
-- æŸ¥æ‰¾æœ€ç›¸ä¼¼çš„5ä¸ªæ–‡æ¡£åˆ†å—
SELECT * FROM t_vector_record vr
JOIN t_document d ON vr.document_id = d.id
WHERE d.user_id = ? AND d.status = 'SUCCESS'
ORDER BY vr.embedding <-> ?::vector  -- pgvectorç›¸ä¼¼åº¦æ“ä½œç¬¦
LIMIT 5;
```

---

## ğŸ”§ æŠ€æœ¯é€‰å‹è¯´æ˜

### ä¸ºä»€ä¹ˆé€‰æ‹©Spring Bootï¼Ÿ
- ğŸš€ **å¿«é€Ÿå¼€å‘**: è‡ªåŠ¨é…ç½®ï¼Œå¼€ç®±å³ç”¨
- ğŸ—ï¸ **æˆç†Ÿç”Ÿæ€**: ä¸°å¯Œçš„starterå’Œç¬¬ä¸‰æ–¹åº“
- ğŸ“Š **ç”Ÿäº§å°±ç»ª**: å†…ç½®ç›‘æ§ã€å¥åº·æ£€æŸ¥ã€æŒ‡æ ‡æ”¶é›†
- ğŸ”§ **æ˜“äºç»´æŠ¤**: çº¦å®šä¼˜äºé…ç½®ï¼Œä»£ç ç»“æ„æ¸…æ™°

### ä¸ºä»€ä¹ˆé€‰æ‹©PostgreSQL + pgvectorï¼Ÿ
- ğŸ—ƒï¸ **å…³ç³»å‹æ•°æ®**: æ”¯æŒå¤æ‚æŸ¥è¯¢ã€äº‹åŠ¡ã€å¤–é”®çº¦æŸ
- ğŸ” **å‘é‡æœç´¢**: pgvectoræ‰©å±•æ”¯æŒé«˜æ•ˆå‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢
- ğŸ“ˆ **æ€§èƒ½ä¼˜ç§€**: å‘é‡æŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œæ”¯æŒç´¢å¼•ä¼˜åŒ–
- ğŸ’° **æˆæœ¬ä½**: å¼€æºå…è´¹ï¼Œæ— éœ€é¢å¤–çš„å‘é‡æ•°æ®åº“

### ä¸ºä»€ä¹ˆä½¿ç”¨UUIDä½œä¸ºä¸»é”®ï¼Ÿ
- ğŸŒ **å…¨å±€å”¯ä¸€**: åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸ä¼šå†²çª
- ğŸ”’ **å®‰å…¨æ€§**: å¤–éƒ¨æ— æ³•çŒœæµ‹IDè§„å¾‹
- ğŸ”„ **ä¾¿äºè¿ç§»**: ä¸åŒæ•°æ®åº“é—´è¿ç§»æ— å†²çª

### ä¸ºä»€ä¹ˆä½¿ç”¨å¼‚æ­¥å¤„ç†ï¼Ÿ
- âš¡ **ç”¨æˆ·ä½“éªŒ**: ç«‹å³å“åº”ï¼Œä¸éœ€è¦ç­‰å¾…
- ğŸ”„ **ç³»ç»Ÿæ€§èƒ½**: ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œæ”¯æŒå¹¶å‘
- ğŸ“Š **èµ„æºåˆ©ç”¨**: åˆç†åˆ©ç”¨CPUå’ŒIOèµ„æº

---

## ğŸš€ å¼€å‘å’Œéƒ¨ç½²

### å¼€å‘ç¯å¢ƒå¯åŠ¨
```bash
# 1. å¯åŠ¨PostgreSQL
brew services start postgresql@15

# 2. åˆ›å»ºæ•°æ®åº“
psql postgres -c "CREATE DATABASE rag_qa_system;"
psql rag_qa_system -c "CREATE EXTENSION vector;"

# 3. å¯åŠ¨åº”ç”¨
cd demo1
mvn spring-boot:run

# 4. éªŒè¯
curl http://localhost:8080/api/system/health
```

### é…ç½®æ–‡ä»¶ (application.yml)
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/rag_qa_system
    username: postgres
    password: your_password
  jpa:
    hibernate:
      ddl-auto: update  # è‡ªåŠ¨åˆ›å»º/æ›´æ–°è¡¨ç»“æ„

server:
  port: 8080
  servlet:
    context-path: /api  # æ‰€æœ‰æ¥å£éƒ½ä»¥/apiå¼€å¤´
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|----------|------|
| æ–‡ä»¶ä¸Šä¼ æ¥å£ | < 1ç§’ | åªä¿å­˜æ–‡ä»¶ï¼Œç«‹å³è¿”å› |
| æ–‡æ¡£å¤„ç† (å¼‚æ­¥) | 30-50ç§’ | è§£æ+åˆ†å—+å‘é‡åŒ– |
| å‘é‡æŸ¥è¯¢ | 100-200ms | pgvectoræŸ¥è¯¢5ä¸ªæœ€ç›¸ä¼¼å‘é‡ |
| é—®ç­”æ¥å£ | 2-5ç§’ | åŒ…å«å‘é‡æŸ¥è¯¢+LLMç”Ÿæˆ |
| ç³»ç»ŸçŠ¶æ€æŸ¥è¯¢ | < 100ms | ç®€å•çš„æ•°æ®åº“è¿æ¥æ£€æŸ¥ |

---

## ğŸ” å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæ–‡æ¡£ä¸Šä¼ åçŠ¶æ€æ˜¯PROCESSINGï¼Ÿ
A: æ–‡æ¡£ä¸Šä¼ åä¼šå¼‚æ­¥å¤„ç†ï¼ŒåŒ…æ‹¬è§£æã€åˆ†å—ã€å‘é‡åŒ–ç­‰æ­¥éª¤ï¼Œéœ€è¦30-50ç§’å®Œæˆã€‚

### Q: å‘é‡æŸ¥è¯¢ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ
A: pgvectorä½¿ç”¨äº†ä¼˜åŒ–çš„å‘é‡ç›¸ä¼¼åº¦ç®—æ³•ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„æ•°æ®é‡ç›¸å¯¹è¾ƒå°ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„APIæ¥å£ï¼Ÿ
A: 1. åœ¨Controllerä¸­æ·»åŠ æ–¹æ³• 2. åœ¨Serviceä¸­å®ç°ä¸šåŠ¡é€»è¾‘ 3. åœ¨Repositoryä¸­æ·»åŠ æ•°æ®è®¿é—®æ–¹æ³•

### Q: å¦‚ä½•è°ƒè¯•å¼‚æ­¥ä»»åŠ¡ï¼Ÿ
A: æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `logs/application.log`ï¼Œå¼‚æ­¥ä»»åŠ¡çš„å¼‚å¸¸ä¼šè®°å½•åœ¨è¿™é‡Œã€‚

---

**æ–‡æ¡£ç»´æŠ¤**: éšç€ä»£ç æ›´æ–°åŠæ—¶æ›´æ–°æ­¤æ–‡æ¡£  
**æŠ€æœ¯æ”¯æŒ**: å¦‚æœ‰é—®é¢˜è¯·æŸ¥çœ‹æ—¥å¿—æˆ–è”ç³»å¼€å‘å›¢é˜Ÿ